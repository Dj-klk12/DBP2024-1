<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8" />
    <title>TODO_LIST</title>
    
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        
        document.querySelector('#new-task').onsubmit = () => {
            const cb = document.createElement("INPUT");
            cb.setAttribute("type", "checkbox");

            const deleteBtn = document.createElement("BUTTON"); 
            deleteBtn.innerHTML = "x";
            deleteBtn.style.width = '20px'; 
            deleteBtn.style.height = '20px'; 
            deleteBtn.style.marginLeft = '10px'; 

            const taskSpan = document.createElement('span'); 
            taskSpan.textContent = document.querySelector('#task').value;

            const li = document.createElement('li');
            li.appendChild(cb);
            li.appendChild(taskSpan);
            li.appendChild(deleteBtn); 

            cb.addEventListener('change', () => {
                if (cb.checked) {
                    taskSpan.style.textDecoration = 'line-through'; 
                } else {
                    taskSpan.style.textDecoration = 'none'; 
                }
            });

            deleteBtn.addEventListener('click', () => {
                li.remove();
            });

            document.querySelector('#tasks').append(li);

            document.querySelector('#task').value = '';

            return false;
        };

        document.querySelector('#complete-all').onclick = () => {
            const checkboxes = document.querySelectorAll('#tasks input[type="checkbox"]');
            checkboxes.forEach(cb => {
                cb.checked = true;
                cb.dispatchEvent(new Event('change')); 
            });
        };
    });
    </script>
  </head>

  <body>
    <div class="container">
        <div class="cabecera">
            <h1>Todo list Frank Calcina</h1>
        </div>
        <div class="otro"> 
            <h1>Tasks</h1>
            <form id="new-task">
                <input id="task" autocomplete="off" autofocus placeholder="Nueva tarea" type="text">
                <input type="submit" value="AÃ±adir">
            </form>
            <div class="but">
                <button 
                    id="complete-all">Completar todas
                </button>
            </div>
            <ol id="tasks">
            </ol>
        </div>
    </div>
  </body>
</html>